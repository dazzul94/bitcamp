<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="JdbcTestMapper">



   <resultMap type="board" id="boardMap">
      <id column="no" property="no" />
      <result column="title" property="title" />
      <result column="conts" property="contents" />
      <result column="regdt" property="createdDate" />
      <result column="vwcnt" property="viewCount" />
   </resultMap>
   

   <sql id="select1">
      select
      no,title,regdt,vwcnt
   </sql>
   

   <!-- id? => SqlSession 객체에서 SQL문을 찾을 때 사용한다. resultType? => select 결과에서 
      레코드 한 개를 저장할 때 사용할 객체의 타입 -->
   <select id="findAll" resultMap="boardMap">
   <include refid="select1"></include>
      from jdbc_test
   </select>

   <!-- parameterType? => SQL을 실행할 때 SqlSession이 넘겨주는 객체의 타입 SQL 문 안에서는 #{프로퍼티명}으로 
      꺼낸다. -->
   <insert id="insert" parameterType="Map">
      insert into jdbc_test(title,conts,regdt)
      values(#{title},#{contents},now())
   </insert>

   <update id="update" parameterType="board">
      update jdbc_test set
      title=#{title},
      conts=#{contents}
      where no=#{no}
   </update>

   <delete id="delete" parameterType="int">
      delete from jdbc_test where
      no=#{value}
   </delete>

   <select id="findByNo" resultMap="boardMap" parameterType="int">
   <include refid="select1"/>
      ,conts
      from jdbc_test
      where no=#{value}
   </select>
</mapper>  
